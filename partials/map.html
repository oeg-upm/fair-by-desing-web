<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mapa FAIRbyDesign</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/app.css" rel="stylesheet">
  <base target="_top">
</head>
<body>

  <main class="container py-2 pb-0">  
    <h5 class="text-center mb-2">CLICK TO GO</h5>

    <div class="position-relative" style="max-width:1261px; margin:auto;">
      <!-- Tu diagrama SVG -->
      <!-- en partials/map.html -->
    <img src="../assets/FiguraLOT.svg" class="img-fluid d-block rounded border" alt="Mapa FAIRbyDesign" onload="sendHeight()">



      <!-- HOTSPOTS invisibles -->
      <a class="hotspot" href="../page01.html" style="left:14.142%; top:32.696%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../encoding.html" data-key="encoding" style="left:27.861%; top:32.696%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page03.html" style="left:40.550%; top:32.696%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page04.html" style="left:21.200%; top:70.554%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page05.html" style="left:0.026%; top:32.696%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page06.html" style="left:90.370%; top:32.887%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page09.html" style="left:52.910%; top:32.359%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page10.html" style="left:64.469%; top:32.887%; width:9.516%; height:11.472%;"></a>
      <a class="hotspot" href="../page11.html" style="left:77.157%; top:32.887%; width:9.516%; height:11.472%;"></a>
    </div>
  </main>

  <script>
  // Ajuste de altura hacia el padre
  function sendHeight() {
    const h = Math.max(
      document.body.scrollHeight, document.documentElement.scrollHeight,
      document.body.offsetHeight,  document.documentElement.offsetHeight
    );
    parent.postMessage({ type: 'MAP_HEIGHT', height: h }, '*');
  }

  // ðŸ”µ Marcar el hotspot activo segÃºn ?active=...
  function highlightActive(){
    const key = (new URLSearchParams(location.search).get('active') || '').toLowerCase();
    if(!key) return;
    const el = document.querySelector('.hotspot[data-key="'+key+'"]');
    if(el){
      el.classList.add('hotspot--active');
      // Recalcula altura por si el borde/overlay cambia 1â€“2px
      requestAnimationFrame(sendHeight);
    }
  }

  // Inicializa
  window.addEventListener('DOMContentLoaded', () => {
    highlightActive();
    sendHeight();
  });
  window.addEventListener('resize', sendHeight);

  // Si el SVG refluye por ser responsive, ajusta altura
  if('ResizeObserver' in window){
    new ResizeObserver(sendHeight).observe(document.body);
  }
    </script>


</body>
</html>
